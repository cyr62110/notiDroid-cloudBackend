<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="master">
<head>
    <title th:text="#{administrators.create.title}"/>
</head>

<body>

<div layout:fragment="content" class="container">

    <div class="page-header">
        <h1 id="lblPageHeader" th:text="#{administrators.create.lblPageHeader}"/>
    </div>

    <div class="alert alert-danger" th:if="${error != null}" th:text="${error}"/>

    <form role="form" method="post" th:object="${newAdministrator}">
        <!-- General information about the new administrator (email, password, etc.) -->
        <div id="divGeneralInformation">
            <h3 id="lblGeneralInformation" th:text="#{administrators.create.lblGeneralInformation}"/>

            <div class="form-group">
                <label for="firstName" th:text="#{administrators.create.form.firstName}"/>
                <input type="text" class="form-control" id="firstName" th:field="*{firstName}"
                       th:placeholder="#{administrators.create.form.firstName.placeholder}"/>
            </div>
            <div class="form-group">
                <label for="lastName" th:text="#{administrators.create.form.lastName}"/>
                <input type="text" class="form-control" id="lastName" th:field="*{lastName}"
                       th:placeholder="#{administrators.create.form.lastName.placeholder}"/>
            </div>
            <div class="form-group">
                <label for="email" th:text="#{administrators.create.form.email}"/>
                <input type="email" class="form-control" id="email" th:field="*{email}"
                       th:placeholder="#{administrators.create.form.email.placeholder}"/>
            </div>
            <div class="form-group">
                <label for="password" th:text="#{administrators.create.form.password}"/>
                <input type="password" class="form-control" id="password" th:field="*{password}"/>
            </div>
        </div>
        <!-- Part allowing to change the administrator permission -->
        <div id="divPermission">
            <h3 id="lblPermissions" th:text="#{administrators.create.lblPermissions}"/>
            <span th:if="${giveAllPermissions}">
                <p>
                    You can only delegate permissions you have yourself to the new administrator. If the new
                    administrator
                    wants
                    some permissions that you cannot provide, he needs to contact another administrator having those
                    permissions and
                    that has the MODIFY_ADMINISTRATOR permission.
                </p>
                <div class="checkbox" th:each="permission : ${availablePermissions}">
                    <label>
                        <input type="checkbox" value="${permission.name}"/>
                    </label>
                </div>
            </span>

            <p id="lblPermission" th:if="${!giveAllPermissions}" style="padding: 10px;" class="bg-info"
               th:text="#{administrators.create.lblPermission}"/>
        </div>
        <br/>
        <!-- Do not forget the CSRF protection since it is active in Spring Security MVC -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit" class="btn btn-primary btn-lg" th:text="#{administrators.create.form.submit}"/>
    </form>
</div>

</body>

</html>